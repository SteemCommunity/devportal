<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" >

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Cousine|Inconsolata" rel="stylesheet">
		
		<link rel="shortcut icon" type="image/png" href="/favicon.png">
		

		
		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/css/fontawesome-all.min.css">
		<script src="/js/main.js"></script>
		

		<!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Get Posts by Category - Steem Developer</title>
<meta property="og:title" content="Get Posts by Category" />
<meta name="description" content="Get post list from different category (trending, hot, active, etc.)" />
<meta property="og:description" content="Get post list from different category (trending, hot, active, etc.)" />
<link rel="canonical" href="https://developer.steem.io/tutorials-ruby/get_posts_by_category" />
<meta property="og:url" content="https://developer.steem.io/tutorials-ruby/get_posts_by_category" />
<meta property="og:site_name" content="Steem Developer" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-06-06T09:20:36-05:00" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Get Posts by Category",
"datePublished": "2018-06-06T09:20:36-05:00",
"description": "Get post list from different category (trending, hot, active, etc.)",
"url": "https://developer.steem.io/tutorials-ruby/get_posts_by_category"}</script>
<!-- End Jekyll SEO tag -->


		
	</head>
	<body>
		<header>
			<h1>
				
					<a href="/"><img src="/images/logotype_white.svg" height="40" alt="Steem Developer logo"></a>
				
				<a href="/" class="logo-link"></a>
				<button type="button" class="open-nav" id="open-nav"></button>
			</h1>

			
				<form action="/search/" method="get">
					<input type="text" name="q" id="search-input" placeholder="Search">
					<input type="submit" value="Search" style="display: none;">
				</form>
			

			<div id="sidebar" class="sidebar">
	
	
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/">
		<h6 class="ctrl-nav-section title">Introduction</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/#introduction-welcome">Welcome to Steem</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/quickstart/">
		<h6 class="ctrl-nav-section title">Quickstart</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/quickstart/#quickstart-choose-library">Choose Library</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-steemd-nodes">steemd Nodes</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-testnet">Steem Testnet</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/tutorials/">
		<h6 class="ctrl-nav-section title">Tutorials</h6>
		<ul class="cont-nav-section content">
			
				
					
						<li><a href="/tutorials/#tutorials-javascript">Javascript</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-python">Python</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-ruby">Ruby</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-recipes">Recipes</a></li>
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/services/">
		<h6 class="ctrl-nav-section title">Services</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/services/#services-steemit">Steemit.com</a></li>
						
					
						
						<li><a href="/services/#services-sbds">SBDS</a></li>
						
					
						
						<li><a href="/services/#services-steemconnect">SteemConnect</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/apidefinitions/">
		<h6 class="ctrl-nav-section title">Appbase API</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/apidefinitions/#apidefinitions-condenser-api">Condenser Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-account-by-key-api">Account By Key Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-account-history-api">Account History Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-database-api">Database Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-follow-api">Follow Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-jsonrpc">Jsonrpc</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-market-history-api">Market History Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-network-broadcast-api">Network Broadcast Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-tags-api">Tags Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-witness-api">Witness Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-block-api">Block Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-broadcast-ops">Broadcast Ops</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/community/">
		<h6 class="ctrl-nav-section title">Community</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/community/#community-overview">Overview</a></li>
						
					
						
						<li><a href="/community/#community-resources">Resources</a></li>
						
					
						
						<li><a href="/community/#community-developeradvocate">Sharing & Help</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/glossary/">
		<h6 class="ctrl-nav-section title">Glossary</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/glossary/#glossary-chain-basics">Chain Basics</a></li>
						
					
						
					
						
						<li><a href="/glossary/#glossary-governance">Governance</a></li>
						
					
						
						<li><a href="/glossary/#glossary-transactions">Transactions</a></li>
						
					
						
						<li><a href="/glossary/#glossary-api">API</a></li>
						
					
						
						<li><a href="/glossary/#glossary-market">Market</a></li>
						
					
				
			
		</ul>
	</section>
	
</div>


			<!--<p class="copyright">-->
				<!--<a href="https://steemit.com.com/">-->
				  <!--steemit-->
				<!--</a>-->
			<!--</p>-->
			<link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
		</header>
		<div class="main" id="top">
			<div class="hero">
				<h1 class="hero__h1">Steem Developer Portal </h1>
				
				<img class="hero__img" src="/images/hero.png">
				
			</div>
			<section id="tutorials-ruby-get-posts-by-category" class="doc-content tutorials-ruby-get-posts-by-category">
	<section class="left-docs">
		<h3>
			<a id="tutorials-ruby-get-posts-by-category">
				Get Posts by Category
				
			</a>
		</h3>
		
			<p class="description">Get post list from different category (trending, hot, active, etc.)</p>
		

		<h3 id="intro">Intro</h3>

<p>This example will output posts depending on which category is provided as the arguments.</p>

<h3 id="script">Script</h3>

<p>Create a filed called <code class="highlighter-rouge">get_posts_by_category.rb</code>.</p>

<p>This script will pick a method to call based on the arguments passed.  The expected categories are:</p>

<ul>
  <li>trending</li>
  <li>hot</li>
  <li>active</li>
  <li>created</li>
  <li>votes</li>
  <li>promoted</li>
  <li>children</li>
</ul>

<p>We will base the name of the API method to execute on the provided argument.  Once we know which method to execute, we can build the query options.  The defaults for this script is <code class="highlighter-rouge">limit: 10</code> and <code class="highlighter-rouge">tag: ''</code>.</p>

<p>For each post we retrieve, we are going to build up a summary to display the interesting fields.  In this case, we’re interested in:</p>

<ul>
  <li>Creation Timestamp</li>
  <li>Title</li>
  <li>Author</li>
  <li>Net Votes</li>
  <li>Number of replies</li>
  <li>If it’s promoted</li>
  <li>Number of words in the body</li>
  <li>Canonical URL</li>
</ul>

<h4 id="error-handling">Error Handling</h4>

<p>We’re checking the result for <code class="highlighter-rouge">error</code> in case the remote node has an issue to raise.  Normally, it will be <code class="highlighter-rouge">nil</code>, but if it’s populated, output <code class="highlighter-rouge">error.message</code> and exit.</p>

<h3 id="to-run">To Run</h3>

<p>First, set up your workstation using the steps provided in <a href="/tutorials-ruby/getting_started">Getting Started</a>.  Then you can create and execute the script (or clone from this repository):</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>ruby get_posts_by_category.rb trending 1 steem
</code></pre>
</div>

<h3 id="example-output">Example Output</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>2018-05-24 06:38:33 UTC
  Post: New Phone App For Steemit - Wow!
  By: happymoneyman
  Votes: 1087
  Replies: 332
  Promoted: 0.001 SBD
  Words: 190
  https://steemit.com/steemit/@happymoneyman/new-phone-app-for-steemit-wow
</code></pre>
</div>

	</section>
  
  
    <section class="right-code">
      
        <p class="right-section-title">Script</p>
        
        <code>get_posts_by_category.rb</code>
        
        <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'rubygems'</span>
<span class="nb">require</span> <span class="s1">'bundler/setup'</span>

<span class="no">Bundler</span><span class="p">.</span><span class="nf">require</span>

<span class="no">CATEGORIES</span> <span class="o">=</span> <span class="sx">%i(trending hot active created votes promoted children)</span>

<span class="k">if</span> <span class="no">ARGV</span><span class="p">.</span><span class="nf">size</span> <span class="o">&lt;</span> <span class="mi">1</span>
  <span class="nb">puts</span> <span class="s2">"Usage:"</span>
  <span class="nb">puts</span> <span class="s2">"ruby </span><span class="si">#{</span><span class="kp">__FILE__</span><span class="si">}</span><span class="s2"> &lt;</span><span class="si">#{</span><span class="no">CATEGORIES</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">)</span><span class="si">}</span><span class="s2">&gt; [limit] [tag]"</span>
  <span class="nb">exit</span>
<span class="k">end</span>

<span class="n">category</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">downcase</span><span class="p">.</span><span class="nf">to_sym</span>

<span class="k">unless</span> <span class="no">CATEGORIES</span><span class="p">.</span><span class="nf">include?</span> <span class="n">category</span>
  <span class="nb">puts</span> <span class="s2">"Unknown category: </span><span class="si">#{</span><span class="n">category</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">puts</span> <span class="s2">"Expecting one of: </span><span class="si">#{</span><span class="no">CATEGORIES</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">', '</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">exit</span>
<span class="k">end</span>

<span class="n">limit</span> <span class="o">=</span> <span class="p">(</span><span class="no">ARGV</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s1">'10'</span><span class="p">).</span><span class="nf">to_i</span>
<span class="n">tag</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="s1">''</span>
<span class="n">api</span> <span class="o">=</span> <span class="no">Radiator</span><span class="o">::</span><span class="no">Api</span><span class="p">.</span><span class="nf">new</span>

<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">tag: </span><span class="n">tag</span><span class="p">,</span>
  <span class="ss">limit: </span><span class="n">limit</span>
<span class="p">}</span>

<span class="n">api</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="s2">"get_discussions_by_</span><span class="si">#{</span><span class="n">category</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">posts</span><span class="p">,</span> <span class="n">error</span><span class="o">|</span>
  <span class="k">if</span> <span class="o">!!</span><span class="n">error</span>
    <span class="nb">puts</span> <span class="n">error</span><span class="p">.</span><span class="nf">message</span>
    <span class="nb">exit</span>
  <span class="k">end</span>
  
  <span class="n">posts</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">post</span><span class="p">.</span><span class="nf">body</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/\s/</span><span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">post</span><span class="p">.</span><span class="nf">author</span>
    <span class="n">promoted</span> <span class="o">=</span> <span class="n">post</span><span class="p">.</span><span class="nf">promoted</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">uri</span> <span class="o">&lt;&lt;</span> <span class="n">post</span><span class="p">.</span><span class="nf">parent_permlink</span>
    <span class="n">uri</span> <span class="o">&lt;&lt;</span> <span class="s2">"@</span><span class="si">#{</span><span class="n">author</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">uri</span> <span class="o">&lt;&lt;</span> <span class="n">post</span><span class="p">.</span><span class="nf">permlink</span>

    <span class="nb">puts</span> <span class="n">created</span> <span class="o">=</span> <span class="no">Time</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">post</span><span class="p">.</span><span class="nf">created</span> <span class="o">+</span> <span class="s1">'Z'</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="s2">"  Post: </span><span class="si">#{</span><span class="n">post</span><span class="p">.</span><span class="nf">title</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">puts</span> <span class="s2">"  By: </span><span class="si">#{</span><span class="n">author</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">puts</span> <span class="s2">"  Votes: </span><span class="si">#{</span><span class="n">post</span><span class="p">.</span><span class="nf">net_votes</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">puts</span> <span class="s2">"  Replies: </span><span class="si">#{</span><span class="n">post</span><span class="p">.</span><span class="nf">children</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">puts</span> <span class="s2">"  Promoted: </span><span class="si">#{</span><span class="n">promoted</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">puts</span> <span class="s2">"  Words: </span><span class="si">#{</span><span class="n">words</span><span class="p">.</span><span class="nf">size</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">puts</span> <span class="s2">"  https://steemit.com/</span><span class="si">#{</span><span class="n">uri</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
<span class="k">end</span>

</code></pre>
</div>

      
      
      
    </section>
  
  </section>

		</div>
		<script>
			document.getElementById("open-nav").addEventListener("click", function () {
				document.body.classList.toggle("nav-open");
			});
		</script>
	</body>
</html>


<script src="/js/adjust.js"></script>

